!function(t){var e;window.UIkit&&(e=t(UIkit)),"function"==typeof define&&define.amd&&define("uikit-datepicker",["uikit"],function(){return e||t(UIkit)})}(function(t){"use strict";var e,a=!1;return t.component("datepicker",{defaults:{mobile:!1,weekstart:1,i18n:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},format:"DD.MM.YYYY",offsettop:5,maxDate:!1,minDate:!1,pos:"auto",addClass:"",template:function(e,a){var i,n="";if(n+='<div class="uk-datepicker-nav uk-clearfix">',n+='<a href="" class="uk-datepicker-previous"></a>',n+='<a href="" class="uk-datepicker-next"></a>',t.formSelect){var o,s,r,d,u=(new Date).getFullYear(),p=[];for(i=0;i<a.i18n.months.length;i++)i==e.month?p.push('<option value="'+i+'" selected>'+a.i18n.months[i]+"</option>"):p.push('<option value="'+i+'">'+a.i18n.months[i]+"</option>");for(o='<span class="uk-form-select">'+a.i18n.months[e.month]+'<select class="update-picker-month">'+p.join("")+"</select></span>",p=[],r=e.minDate?e.minDate.year():u-50,d=e.maxDate?e.maxDate.year():u+20,i=r;d>=i;i++)i==e.year?p.push('<option value="'+i+'" selected>'+i+"</option>"):p.push('<option value="'+i+'">'+i+"</option>");s='<span class="uk-form-select">'+e.year+'<select class="update-picker-year">'+p.join("")+"</select></span>",n+='<div class="uk-datepicker-heading">'+o+" "+s+"</div>"}else n+='<div class="uk-datepicker-heading">'+a.i18n.months[e.month]+" "+e.year+"</div>";for(n+="</div>",n+='<table class="uk-datepicker-table">',n+="<thead>",i=0;i<e.weekdays.length;i++)e.weekdays[i]&&(n+="<th>"+e.weekdays[i]+"</th>");for(n+="</thead>",n+="<tbody>",i=0;i<e.days.length;i++)if(e.days[i]&&e.days[i].length){n+="<tr>";for(var h=0;h<e.days[i].length;h++)if(e.days[i][h]){var m=e.days[i][h],c=[];m.inmonth||c.push("uk-datepicker-table-muted"),m.selected&&c.push("uk-active"),m.disabled&&c.push("uk-datepicker-date-disabled uk-datepicker-table-muted"),n+='<td><a href="" class="'+c.join(" ")+'" data-date="'+m.day.format()+'">'+m.day.format("D")+"</a></td>"}n+="</tr>"}return n+="</tbody>",n+="</table>"}},boot:function(){t.$win.on("resize orientationchange",function(){a&&a.hide()}),t.$html.on("focus.datepicker.uikit","[data-uk-datepicker]",function(e){var a=t.$(this);a.data("datepicker")||(e.preventDefault(),t.datepicker(a,t.Utils.options(a.attr("data-uk-datepicker"))),a.trigger("focus"))}),t.$html.on("click focus","*",function(i){var n=t.$(i.target);!a||n[0]==e[0]||n.data("datepicker")||n.parents(".uk-datepicker:first").length||a.hide()})},init:function(){if(!t.support.touch||"date"!=this.element.attr("type")||this.options.mobile){var i=this;this.current=this.element.val()?moment(this.element.val(),this.options.format):moment(),this.on("click focus",function(){a!==i&&i.pick(this.value?this.value:i.options.minDate?i.options.minDate:"")}).on("change",function(){i.element.val()&&!moment(i.element.val(),i.options.format).isValid()&&i.element.val(moment().format(i.options.format))}),e||(e=t.$('<div class="uk-dropdown uk-datepicker '+i.options.addClass+'"></div>'),e.on("click",".uk-datepicker-next, .uk-datepicker-previous, [data-date]",function(i){i.stopPropagation(),i.preventDefault();var n=t.$(this);return n.hasClass("uk-datepicker-date-disabled")?!1:void(n.is("[data-date]")?(a.current=moment(n.data("date")),a.element.val(a.current.format(a.options.format)).trigger("change"),e.removeClass("uk-dropdown-shown"),setTimeout(function(){e.removeClass("uk-dropdown-active")},280),a.hide()):a.add(n.hasClass("uk-datepicker-next")?1:-1,"months"))}),e.on("change",".update-picker-month, .update-picker-year",function(){var e=t.$(this);a[e.is(".update-picker-year")?"setYear":"setMonth"](Number(e.val()))}),e.appendTo("body"))}},pick:function(i){var n=this.element.offset(),o=parseInt(n.left),s=parseInt(n.top),r={left:o,right:""};this.current=isNaN(i)?moment(i,this.options.format):moment(),this.initdate=this.current.format("YYYY-MM-DD"),this.update(),("right"==t.langdirection||window.innerWidth-o-e.outerWidth()<0)&&(r.right=window.innerWidth-(window.innerWidth-$("body").width())-(r.left+this.element.outerWidth()),r.left="");var d=s-this.element.outerHeight()+this.element.height()-this.options.offsettop-e.outerHeight(),u=s+this.element.outerHeight()+this.options.offsettop;r.top=u,"top"==this.options.pos?(r.top=d,e.addClass("dp-top")):"auto"==this.options.pos&&window.innerHeight-u-e.outerHeight()+t.$win.scrollTop()<0&&d>=0&&(r.top=d,e.addClass("dp-top")),r.minWidth=e.actual("outerWidth"),e.css(r).addClass("uk-dropdown-active uk-dropdown-shown"),this.trigger("show.uk.datepicker"),a=this},add:function(t,e){this.current.add(t,e),this.update()},setMonth:function(t){this.current.month(t),this.update()},setYear:function(t){this.current.year(t),this.update()},update:function(){var t=this.getRows(this.current.year(),this.current.month()),a=this.options.template(t,this.options);e.html(a),this.trigger("update.uk.datepicker")},getRows:function(t,e){var a=this.options,i=moment().format("YYYY-MM-DD"),n=[31,t%4===0&&t%100!==0||t%400===0?29:28,31,30,31,30,31,31,30,31,30,31][e],o=new Date(t,e,1,12).getDay(),s={month:e,year:t,weekdays:[],days:[],maxDate:!1,minDate:!1},r=[];a.maxDate!==!1&&(s.maxDate=isNaN(a.maxDate)?moment(a.maxDate,a.format):moment().add(a.maxDate,"days")),a.minDate!==!1&&(s.minDate=isNaN(a.minDate)?moment(a.minDate,a.format):moment().add(a.minDate-1,"days")),s.weekdays=function(){for(var t=0,e=[];7>t;t++){for(var i=t+(a.weekstart||0);i>=7;)i-=7;e.push(a.i18n.weekdays[i])}return e}(),a.weekstart&&a.weekstart>0&&(o-=a.weekstart,0>o&&(o+=7));for(var d=n+o,u=d;u>7;)u-=7;d+=7-u;for(var p,h,m,c,l,k=0,f=0;d>k;k++)p=new Date(t,e,1+(k-o),12),h=s.minDate&&s.minDate>p||s.maxDate&&p>s.maxDate,l=!(o>k||k>=n+o),p=moment(p),m=this.initdate==p.format("YYYY-MM-DD"),c=i==p.format("YYYY-MM-DD"),r.push({selected:m,today:c,disabled:h,day:p,inmonth:l}),7===++f&&(s.days.push(r),r=[],f=0);return s},hide:function(){a&&a===this&&(e.removeClass("uk-dropdown-shown"),setTimeout(function(){e.removeClass("uk-dropdown-active dp-top")},280),a=!1,this.trigger("hide.uk.datepicker"))}}),t.Utils.moment=moment(),t.datepicker});